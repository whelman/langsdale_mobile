<!DOCTYPE html>

<html>
<head>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
	<link rel="stylesheet" type="text/css" href="langsdale-on-the-go.css" />
	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
	<script>
		function searchBook() {
			var myKeyword = document.forms["bookSearch"]["keywords"].value;
			var searchUrl1 = "http://catalog.umd.edu/X?op=find&code=wrd&request="+myKeyword+"&base=UB";
			alert(searchUrl1);
			xmlhttp = new XMLHttpRequest();
			xmlhttp.open("GET",searchUrl1,true);
			xmlhttp.setRequestHeader('Content-Type', 'text/xml');
			xmlhttp.send("");
			xmlDoc = xmlhttp.responseXML;
			alert(xmlDoc);
			/*if (xmlDoc.getElementsByTagName("error")[0].childNodes[0].nodeValue == "empty set") {
				alert("no");
			}
			else {
				var testing = xmlDoc.getElementsByTagName("set_number")[0].childNodes[0].nodeValue;
				alert(testing);
			}*/
		}
		
	
		/*function updatePCavail() {
			xmlhttp = new XMLHttpRequest();
			//xmlhttp.open("GET","../m/xml/usage.xml",false);
			xmlhttp.open("GET","xml/usage.xml",false);
			//xmlhttp.open("GET","http://www.ubalt.edu/mobilelabs/xml/usage.xml",false);
			xmlhttp.setRequestHeader('Content-Type', 'text/xml');
			xmlhttp.send("");
			xmlDoc = xmlhttp.responseXML;
			var floor1inUse=xmlDoc.getElementsByTagName("INUSE")[3].childNodes[0].nodeValue;
			var floor1avail=xmlDoc.getElementsByTagName("AVAILABLE")[3].childNodes[0].nodeValue;
			var floor2inUseA=xmlDoc.getElementsByTagName("INUSE")[4].childNodes[0].nodeValue;
			var floor2availA=xmlDoc.getElementsByTagName("AVAILABLE")[4].childNodes[0].nodeValue;
			var floor2inUseB=xmlDoc.getElementsByTagName("INUSE")[6].childNodes[0].nodeValue;
			var floor2availB=xmlDoc.getElementsByTagName("AVAILABLE")[6].childNodes[0].nodeValue;
			var floor3inUse=xmlDoc.getElementsByTagName("INUSE")[5].childNodes[0].nodeValue;
			var floor3avail=xmlDoc.getElementsByTagName("AVAILABLE")[5].childNodes[0].nodeValue;
			var totalFloor1=parseInt(floor1inUse)+parseInt(floor1avail);
			var totalFloor2=parseInt(floor2inUseA)+parseInt(floor2availA)+parseInt(floor2inUseB)+parseInt(floor2availB);
			var totalFloor3=parseInt(floor3inUse)+parseInt(floor3avail);
			//alert("totalFloor1: "+totalFloor1+", "+"totalFloor2: "+totalFloor2+", "+"totalFloor3: "+totalFloor3);
			var floor2avail=parseInt(floor2availA)+parseInt(floor2availB);
			//alert(floor2inUse);
			var data1floor="Available "+floor1avail+" / Total "+totalFloor1;
			var data2floor="Available "+floor2avail+" / Total "+totalFloor2;
			var data3floor="Available "+floor3avail+" / Total "+totalFloor3;
			document.getElementById("floor1").innerHTML = data1floor;
			document.getElementById("floor2").innerHTML = data2floor;
			document.getElementById("floor3").innerHTML = data3floor;
		}*/
	</script>
    <title>Search in Langsdale</title>
</head>
<body>
	<div data-role="page" id="index">

		<div data-role="header" data-position="fixed" id="my_header">
			<a href="index.html" data-role="button" data-inline="true" data-icon="arrow-l" data-ajax="false">Back</a>
			<h1>Search in Langsdale</h1>
		</div><!-- /header -->

		<div data-role="content">
			
			<form name="bookSearch" id="bookSearch" action="book-search.html" method="post" onsubmit="return searchBook()" >
				<label for="keywords"><h3>Search in Langsdale:</h3></label>
				<input type="search" name="term" id="keywords" data-mini="true" />
			</form>

		</div><!-- /content -->
		
		<div data-role="footer" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a href="index.html" data-icon="home" class="ui-btn-active" data-ajax="false">Home</a></li>
					<li><a href="http://langsdale.ubalt.edu" data-icon="grid" data-ajax="false">Full site</a></li> 
				</ul>
			</div><!-- /navbar -->
		</div><!-- /footer -->

	</div><!-- /page -->
	
</body>
</html>





