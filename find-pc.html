<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="UHF-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
	<link rel="stylesheet" type="text/css" href="langsdale-on-the-go.css" />
	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
	<script>
		window.onload = updatePCavail;
		function updatePCavail() {
			xmlhttp = new XMLHttpRequest();
			//xmlhttp.open("GET","../m/xml/usage.xml",false);
			xmlhttp.open("GET","xml/usage.xml",false);
			//xmlhttp.open("GET","http://www.ubalt.edu/mobilelabs/xml/usage.xml",false);
			xmlhttp.setRequestHeader('Content-Type', 'text/xml');
			xmlhttp.send("");
			xmlDoc = xmlhttp.responseXML;
			var floor1inUse=xmlDoc.getElementsByTagName("INUSE")[3].childNodes[0].nodeValue;
			var floor1avail=xmlDoc.getElementsByTagName("AVAILABLE")[3].childNodes[0].nodeValue;
			var floor2inUseA=xmlDoc.getElementsByTagName("INUSE")[4].childNodes[0].nodeValue;
			var floor2availA=xmlDoc.getElementsByTagName("AVAILABLE")[4].childNodes[0].nodeValue;
			var floor2inUseB=xmlDoc.getElementsByTagName("INUSE")[6].childNodes[0].nodeValue;
			var floor2availB=xmlDoc.getElementsByTagName("AVAILABLE")[6].childNodes[0].nodeValue;
			var floor3inUse=xmlDoc.getElementsByTagName("INUSE")[5].childNodes[0].nodeValue;
			var floor3avail=xmlDoc.getElementsByTagName("AVAILABLE")[5].childNodes[0].nodeValue;
			var totalFloor1=parseInt(floor1inUse)+parseInt(floor1avail);
			var totalFloor2=parseInt(floor2inUseA)+parseInt(floor2availA)+parseInt(floor2inUseB)+parseInt(floor2availB);
			var totalFloor3=parseInt(floor3inUse)+parseInt(floor3avail);
			//alert("totalFloor1: "+totalFloor1+", "+"totalFloor2: "+totalFloor2+", "+"totalFloor3: "+totalFloor3);
			var floor2avail=parseInt(floor2availA)+parseInt(floor2availB);
			//alert(floor2inUse);
			var data1floor="Available "+floor1avail+" / Total "+totalFloor1;
			var data2floor="Available "+floor2avail+" / Total "+totalFloor2;
			var data3floor="Available "+floor3avail+" / Total "+totalFloor3;
			document.getElementById("floor1").innerHTML = data1floor;
			document.getElementById("floor2").innerHTML = data2floor;
			document.getElementById("floor3").innerHTML = data3floor;
		}
	</script>
    <title>Find a PC</title>
</head>
<body>
	<div data-role="page">

		<div data-role="header" data-position="fixed" id="my_header">
			<a href="index.html" data-role="button" data-inline="true" data-icon="arrow-l" data-ajax="false">Back</a>
			<h1>Find a PC</h1>
		</div><!-- /header -->

		<div data-role="content">
			
			<div class="ui-block-a">
				<small>Latest system update: 9:23am.</small>
			</div>
			<br />
			
			<div>
				<ul data-role="listview" data-inset="true" data-theme="g" data-count-theme="c">
					<li data-role="list-divider">Computers availability</li>
					<li class="ui-body-c">
						<h3>First Floor</h3>
						<span class="ui-li-count" id="floor1"></span>
					</li>
					<li class="ui-body-c">
						<h3>Second Floor</h3>
						<span class="ui-li-count" id="floor2"></span>
					</li>
					<li class="ui-body-c">
						<h3>Third Floor</h3>
						<span class="ui-li-count" id="floor3"></span>
					</li>
				</ul>
			</div>

			<div class="ui-grid-solo">
				<a href="find-pc.html" data-role="button" data-icon="refresh" data-ajax="false">Refresh</a></div>
			</div><!-- /grid-a -->

		</div><!-- /content -->
		
		<div data-role="footer" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a href="index.html" data-icon="home" class="ui-btn-active" data-ajax="false">Home</a></li>
					<li><a href="http://langsdale.ubalt.edu" data-icon="grid" data-ajax="false">Full site</a></li> 
				</ul>
			</div><!-- /navbar -->
		</div><!-- /footer -->

	</div><!-- /page -->
</body>
</html>


