<!DOCTYPE html>

<html>
<head>
	<title>Langsdale On the Go!</title>
    <meta charset="UHF-8">
    <meta charset="UHF-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
	<link rel="stylesheet" type="text/css" href="langsdale-on-the-go.css" />
	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=places"></script> 
	<script type="text/javascript" src="js/demo.js"></script>
	<script type="text/javascript" src="ui/jquery.ui.map.js"></script>
	<script type="text/javascript" src="ui/jquery.ui.map.extensions.js"></script>
	<script type="text/javascript" src="ui/jquery.ui.map.services.js"></script>
	
	<script type="text/javascript" src="js/modernizr-2.0.6/modernizr.min.js"></script>
	<script type="text/javascript" src="js/jquery.ui-1.8.15/jquery.ui.autocomplete.min.js"></script>
	
	<script type="text/javascript">
        $(function() { 
			
			var mobileDemo = { 'center': '57.7973333,12.0502107', 'zoom': 10 };
			
			////////////////////////////////////////////////////////////
			
			$('#basic_map').live('pagecreate', function() {
				demo.add('basic_map', function() {
					$('#map_canvas').gmap({'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':true, 'callback': function() {
						var self = this;
						self.addMarker({'position': this.get('map').getCenter() }).click(function() {
							self.openInfoWindow({ 'content': 'Hello World!' }, this);
						});
					}}); 
				}).load('basic_map');
			});
			
			$('#basic_map').live('pageshow', function() {
				demo.add('basic_map', function() { $('#map_canvas').gmap('refresh'); }).load('basic_map');
			});
			
			////////////////////////////////////////////////////////////
			
			$('#directions_map').live('pagecreate', function() {
				demo.add('directions_map', function() {
					$('#map_canvas_1').gmap({'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':true, 'callback': function() {
						var self = this;
						self.set('getCurrentPosition', function() {
							self.refresh();
							self.getCurrentPosition( function(position, status) {
								if ( status === 'OK' ) {
									var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude)
									self.get('map').panTo(latlng);
									self.search({ 'location': latlng }, function(results, status) {
										if ( status === 'OK' ) {
											$('#from').val(results[0].formatted_address);
										}
									});
								} else {
									alert('Unable to get current position');
								}
							});
						});
						$('#submit').click(function() {
							self.displayDirections({ 'origin': $('#from').val(), 'destination': $('#to').val(), 'travelMode': google.maps.DirectionsTravelMode.DRIVING }, /*{ 'panel': document.getElementById('directions')}*/null, function(response, status) {
								( status === 'OK' ) ? $('#results').show() : $('#results').hide();
							});
							return false;
						});
					}});
				}).load('directions_map');
			});
			
			$('#directions_map').live('pageshow', function() {
				demo.add('directions_map', $('#map_canvas_1').gmap('get', 'getCurrentPosition')).load('directions_map');
			});
			
			////////////////////////////////////////////////////////////
							
			$('#gps_map').live('pagecreate', function() {
				demo.add('gps_map', function() {
					$('#map_canvas_2').gmap({'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':true, 'callback': function(map) {
						var self = this;
						self.watchPosition(function(position, status) {
							if ( status === 'OK' ) {
								var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
								if ( !self.get('markers').client ) {
									self.addMarker({ 'id': 'client', 'position': latlng, 'bounds': true });
								} else {
									self.get('markers').client.setPosition(latlng);
									map.panTo(latlng);
								}
							}
						});
					}});
				}).load('gps_map');
			});
			
			$('#gps_map').live('pageshow', function() {
				demo.add('gps_map', function() { $('#map_canvas_2').gmap('refresh'); }).load('gps_map');
			});
			
			$('#gps_map').live("pagehide", function() {
				demo.add('gps_map', function() { $('#map_canvas_2').gmap('clearWatch'); }).load('gps_map');
			});
			
			////////////////////////////////////////////////////////////
			
			$('#places').live('pagecreate', function() {
				demo.add('places_1', function() {
					$('#map_canvas_3').gmap({'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':true, 'callback': function() {
						var self = this;
						var control = self.get('control', function() {
							$(self.el).append('<div id="control"><div><input id="places-search" class="ui-bar-d ui-input-text ui-body-null ui-corner-all ui-shadow-inset ui-body-d ui-autocomplete-input" type="text"/></div></div>');
							self.autocomplete($('#places-search')[0], function(ui) {
								self.clear('markers');
								self.set('bounds', null);
								self.placesSearch({ 'location': ui.item.position, 'radius': '5000' }, function(results, status) {
									if ( status === 'OK' ) {
										$.each(results, function(i, item) {
											self.addMarker({ 'id': item.id, 'position': item.geometry.location, 'bounds':true }).click(function() {
												self.openInfoWindow({'content': '<h4>'+item.name+'</h4>'}, this);
											});
										});
									}
								});
							});
							return $('#control')[0];
						});
						self.addControl(new control(), 1);
					}});
				}).load('places_1');
			});
			
			$('#places').live('pageshow', function() {
				demo.add('places_2', function() { $('#map_canvas_3').gmap('refresh'); }).load('places_2');
			});
			
		});
    </script>
</head>
<body>
	<div data-role="page">

		<div data-role="header" data-position="fixed">
			<a href="index.html" data-role="button" data-inline="true" data-icon="arrow-l" data-ajax="false">Back</a>
			<h1>Hours and Locations</h1>
		</div><!-- /header -->

		<div data-role="content">
			<h3>Fall and Spring Semesters</h3>
			<ul data-role="listview" data-inset="true" data-theme="g" data-count-theme="b">
				<li data-role="list-divider">Schedule</li>
				<li class="ui-body-c">
					<table>
						<thead>
							<tr>
								<th style="text-align:left"><small>Day</small></th>
								<th style="text-align:left"><small>Library</small></th>
								<th style="text-align:left"><small>Reference Desk</small></th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td style="text-align:left"><small>Mo - Th&nbsp;&nbsp;</small></td>
								<td><small>&nbsp;&nbsp;8:00 am - 10:00 pm *&nbsp;&nbsp;&nbsp;</small></td>
								<td><small>10:00 am - 8:30 pm</small></td>
							</tr>
							<tr>
								<td style="text-align:left"><small>Fr</small></td>
								<td><small>&nbsp;&nbsp;8:00 am - &nbsp;&nbsp;6:00 pm</small></td>
								<td><small>10:00 am - 6:00 pm</small></td>
							</tr>
							<tr>
								<td style="text-align:left"><small>Sa</small></td>
								<td><small>10:00 am - &nbsp;&nbsp;7:00 pm</small></td>
								<td><small>10:00 am - 7:00 pm</small></td>
							</tr>
							<tr>
								<td style="text-align:left"><small>Su</small></td>
								<td><small>10:00 am - &nbsp;&nbsp;7:00 pm</small></td>
								<td><small>10:00 am - 7:00 pm</small></td>
							</tr>
						</tbody>
					</table>
				</li>
			</ul>
			
			</p>
				<strong>Scheduled Closings<br/></strong>
				<br/>
				<small>Sunday, March 18<br/>Saturday, March 24<br/>Sunday, April 8</small>
			</p>
			<p>
				<small>*Please note that the Public Safety officer begins clearing the building, starting on the fourth floor, at 15 minutes prior to closing. No entry into the building will be permitted during this time.</small>
			</p>
			<!-- a href="langsdale_location.html" data-role="button"  data-icon="arrow-r" data-iconpos="right">Locate Langsdale on the Map</a -->
			<a href="#directions_map" data-role="button"  data-icon="arrow-r" data-iconpos="right">Location & Directions</a>
			
		</div><!-- /content -->
		
		<div data-role="footer" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a href="index.html" data-icon="home" class="ui-btn-active" data-ajax="false">Home</a></li>
					<li><a href="http://langsdale.ubalt.edu" data-icon="grid" data-ajax="false">Full site</a></li> 
				</ul>
			</div><!-- /navbar -->
		</div><!-- /footer -->

	</div><!-- /page -->
	
	<div id="directions_map" data-role="page">
		
		<div data-role="header" data-position="fixed">
			<h1>Location & Directions</h1>
		</div><!-- /header -->
		
		<div data-role="content">	
			<div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
				<div id="map_canvas_1" style="height:300px;"></div>
				<p>
					<label for="from">From</label>
					<input id="from" class="ui-bar-c" type="text" value="G&ouml;teborg, Sweden" />
				</p>
				<p>
					<label for="to">To</label>
					<input id="to" class="ui-bar-c" type="text" value="Stockholm, Sweden" />
				</p>
				<a id="submit" href="#" data-role="button" data-icon="search">Get directions</a>
			</div>
			<div id="results" class="ui-listview ui-listview-inset ui-corner-all ui-shadow" style="display:none;">
				<div class="ui-li ui-li-divider ui-btn ui-bar-b ui-corner-top ui-btn-up-undefined">Results</div>
				<div id="directions"></div>
				<div class="ui-li ui-li-divider ui-btn ui-bar-b ui-corner-bottom ui-btn-up-undefined"></div>
			</div>
		</div>
		
		<div data-role="footer" data-position="fixed" data-id="myfooter">
			<div data-role="navbar" data-iconpos="left">
				<ul>
					<li><a href="index.html" data-icon="home" data-ajax="false">Home</a></li>
					<li><a href="about.html" data-icon="info">About</a></li>
					<li><a href="http://langsdale.ubalt.edu" data-icon="grid">Website</a></li> 
				</ul>
			</div><!-- /navbar -->
		</div><!-- /footer -->
		
	</div>
	
</body>
</html>
